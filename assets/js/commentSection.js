(()=>{function e(e,t,n,a,r,o,c){try{var m=e[o](c),i=m.value}catch(e){return void n(e)}m.done?t(i):Promise.resolve(i).then(a,r)}function t(t){return function(){var n=this,a=arguments;return new Promise((function(r,o){var c=t.apply(n,a);function m(t){e(c,r,o,m,i,"next",t)}function i(t){e(c,r,o,m,i,"throw",t)}m(void 0)}))}}var n=document.getElementById("videoContainer"),a=document.getElementById("commentForm"),r=document.querySelectorAll("#commentDeleteBtn"),o=document.getElementById("commentCount"),c=function(e,t,n,a){var r=document.querySelector(".video__comments ul"),o=document.createElement("li");o.className="video__comment",o.dataset.id=t;var c=document.createElement("div");if(c.className="video__comment-avatar",n){var m=document.createElement("img");m.src="/".concat(n),m.className="avatar--small",c.appendChild(m)}else{var i=document.createElement("div"),d=document.createElement("span");d.innerText=a[0],i.appendChild(d),i.className="avatar-base avatar--small",c.appendChild(i)}var s=document.createElement("div");s.className="video__comment-content";var u=document.createElement("span");u.className="video__comment-owner",u.innerText=a;var l=document.createElement("span");l.className="video__comment-text",l.innerText=e,s.appendChild(u),s.appendChild(l);var p=document.createElement("div");p.className="video__comment-delete";var v=document.createElement("span");v.innerText="‚ùå",v.id="commentDeleteBtn",p.appendChild(v),o.appendChild(c),o.appendChild(s),o.appendChild(p),r.prepend(o)},m=function(){var e=t(regeneratorRuntime.mark((function e(t){var r,m,i,d,s,u,l,p,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=a.querySelector("textarea"),m=r.value,i=n.dataset.id,""!==m){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,fetch("/api/videos/".concat(i,"/comment"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:m})});case 8:if(201!==(d=e.sent).status){e.next=20;break}return r.value="",e.next=13,d.json();case 13:s=e.sent,u=s.newCommentId,l=s.avatar,p=s.name,c(m,u,l,p),0===(v=parseInt(o.textContent.split(" ")[0]))?o.innerText="1 Comment":(v+=1,o.innerText="".concat(v," Comments"));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=t(regeneratorRuntime.mark((function e(t){var n,a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.srcElement.parentNode.parentNode,a=n.dataset.id,e.next=4,fetch("/api/comments/".concat(a,"/delete"),{method:"DELETE"});case 4:200===e.sent.status&&(n.remove(),2===(r=parseInt(o.textContent.split(" ")[0]))?o.innerText="1 Comment":(r-=1,o.innerText="".concat(r," Comments")));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(a&&a.addEventListener("submit",m),0!==r.length)for(var d=0;d<r.length;d++)r[d].addEventListener("click",i)})();