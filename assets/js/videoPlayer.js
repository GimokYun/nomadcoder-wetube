(()=>{var e=document.getElementById("videoContainer"),t=document.querySelector("video"),n=document.getElementById("videoControls"),a=document.getElementById("play"),u=a.querySelector("i"),d=document.getElementById("mute"),i=d.querySelector("i"),o=document.getElementById("volume"),s=document.getElementById("currentTime"),c=document.getElementById("totalTime"),r=document.getElementById("timeline"),l=document.getElementById("fullScreen"),m=l.querySelector("i"),f=null,v=.5;t.volume=v;var E=function(){t.paused?t.play():t.pause(),u.classList=t.paused?"fas fa-play":"fas fa-pause"},y=function(){t.muted?t.muted=!1:t.muted=!0,i.classList=t.muted?"fas fa-volume-mute":"fas fa-volume-up",o.value=t.muted?0:v},L=function(e){return e>=3600?new Date(1e3*e).toISOString().substring(11,19):new Date(1e3*e).toISOString().substring(14,19)},p=function(){return n.classList.remove("showing")};a.addEventListener("click",E),d.addEventListener("click",y),o.addEventListener("input",(function(e){var n=e.target.value;t.muted&&(t.muted=!1,d.innerText="Mute"),v=n,t.volume=n})),t.addEventListener("loadedmetadata",(function(){c.innerText=L(Math.floor(t.duration)),r.max=Math.floor(t.duration)})),t.addEventListener("timeupdate",(function(){s.innerText=L(Math.floor(t.currentTime)),r.value=Math.floor(t.currentTime),t.duration===t.currentTime&&(u.classList="fas fa-play")})),t.addEventListener("click",E),t.addEventListener("ended",(function(){var t=e.dataset.id;fetch("/api/videos/".concat(t,"/view"),{method:"POST"})})),r.addEventListener("input",(function(e){var n=e.target.value;t.currentTime=n})),l.addEventListener("click",(function(){document.fullscreenElement?(document.exitFullscreen(),m.classList="fas fa-expand"):(e.requestFullscreen(),m.classList="fas fa-compress")})),e.addEventListener("mousemove",(function(){f&&(clearTimeout(f),f=null),n.classList.add("showing"),f=setTimeout(p,3e3)})),e.addEventListener("mouseleave",(function(){p()})),document.body.addEventListener("keydown",(function(t){"textarea"!==t.target.id&&("Space"===t.code?E():"KeyM"===t.code?y():"KeyF"===t.code?(e.requestFullscreen(),m.classList="fas fa-compress"):"Escape"===t.code&&(document.exitFullscreen(),m.classList="fas fa-expand"))}))})();